{% extends 'layouts/page-foundation-long-form.njk' %}
{% from 'partials/card-profile.njk' import card %}

{% set contentType = contentType %}
{% set title = talkTitle + ' by ' + speaker %}
{% set description = talkExcerpt %}

{%- css %}
{% include "css/components/talk-page.css" %}
{% include "css/components/video.css" %}
{% include "css/components/card-profile.css" %}
{% endcss %}

{% block pageHeader %}
  <div class="talk-page__heading">
    <div class="talk-page__title-wrap">
      <div class="talk-page__title">
        <h1 class="page-title">
          {{ talkTitle }}
        </h1>
        <p class="talk-page-pronoun">{{ pronouns }}</p>
      </div>

      <p class="talk-page__subtitle">
        {{ speaker }}
      </p>

      {%if talkStartTime %}
        <p>
          At {{ talkStartTime | readableTime }} - {{ talkEndTime | readableTime }},
          <time datetime="{{ talkStartTime | iso8601Date }}">{{ talkStartTime | readableDate }}</time> for {{ event }}
        </p>
      {% endif %}
    </div>

    <div class="talk-page__colour-block"></div>
  </div>
{% endblock %}

{% block content %}
  {%- if talkRecordingID -%}
    <div class="video-wrapper">
      <iframe width="560" height="315" src="{{ 'https://www.youtube-nocookie.com/embed/' + talkRecordingID }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    </div>
  {%- endif -%}

  <div class="columns columns-two-thirds">
    <div class="column-one">
      <div class="text-indent accent-border accent-border--light">
        <p>
          <strong>About this talk</strong>
        </p>
        {{ talkExcerpt | safe }}
      </div>
    </div>

    <aside class="column-two">
      {%- for speaker in collections.speakers | filterTalkBySpeaker(speakerKey) -%}
        {{ card(speaker, horizontal='true') }}
      {%- endfor -%}
    </aside>
  </div>
{% endblock %}